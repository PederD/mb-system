MB-SYSTEM README FILE:
----------------------

This file is located at the top of the MB-System
directory structure. This directory structure contains
the source code of the MB-System software package for
processing and display of swath sonar data.

MB-SYSTEM DESCRIPTION:
----------------------

MB-System is a software package consisting of programs which
manipulate, process, list, or display swath sonar
bathymetry, amplitude, and sidescan data. This software is
distributed freely (and for free) in the form of source code
for Unix platforms. The heart of the system is an
input/output library called MBIO which allows programs to
work transparently with any of a number of supported swath
sonar data formats. This approach has allowed the creation
of "generic" utilities which can be applied in a uniform
manner to sonar data from a variety of sources. Most of the
programs are command-line tools, but the package does
include graphical tools for editing swath bathymetry,
editing navigation, modeling bathymetry calculation, and
adjusting survey navigation.

MB-SYSTEM AUTHORS:
-----------------
David W. Caress (caress@mbari.org)
Monterey Bay Aquarium Research Institute
7700 Sandholdt Road
Moss Landing, CA 95039

Dale N. Chayes (dale@ldeo.columbia.edu)
Lamont-Doherty Earth Observatory of Columbia University
Rte 9W
Palisades, NY 10964

MB-SYSTEM COPYRIGHT, LICENSING AND CAVEAT:
-----------------------------------------
MB-System Copyright (C) 1993-2012 by
David W. Caress (caress@mbari.org)
  Monterey Bay Aquarium Research Institute
  Moss Landing, CA 95039
Dale N. Chayes (dale@ldeo.columbia.edu)
  Lamont-Doherty Earth Observatory
  Palisades, NY 10964mbbackangle.manl
All Rights Reserved
All Wrongs Remembered

OTHER REQUIRED AND SUGGESTED SOFTWARE AND DATA
----------------------------------------------

MB-System requires a number of other software packages
and databases to be fully functional. These are:

- GMT version 4.2.0 or later: MB-System makes use of the Generic Mapping Tools (GMT)
     libraries and programs for much of its graphics. GMT also includes a detailed global
     coastline database. GMT has been developed by Professor Paul Wessel of SOEST (School
     of Ocean and Earth Science and Technology at the Univeristy of Hawaii) and Dr. Walter
     H. F. Smith of NOAA. The GMT source code is available from the GMT web page.
- NetCDF version 3.0 or later: Both GMT and MB-System require the NCAR netCDF
     library.
- Perl version 5.0 or later: Perl is a fast, well documented scripting language used widely
     in the Unix world. MB-System contains a number of perl scripts used both for installation
     and to ease common tasks. Most of the current Unix operating systems include perl. If you
     need to obtain the perl source code, first check with your local system administrator - you
     will probably find perl already available locally. The perl source code can be obtained from
     the GNU Project software archive of the Free Software Foundation.
- Motif 2.0 or later: The interactive graphical utilities in MB-System (e.g. data editors) use
     the Motif 2 widget set, and Motif-compatible libraries or equivalent are required for these
     utilities to be built and to run. Most current Unix operating systems include the required
     Motif libraries. If you do not have these libraries, you can obtain the OpenMotif source
     code distribution from http://www.motifzone.net  Another open source Motif-compatible
     distribution called LessTif (http://www.lesstif.org) has been available for some time, and
     also works well with MB-System.
- FFTW3 - Fastest Fourier Transform in the West. This FFT library is required for the
     spectrogram program mbsegypsd
- Levitus Database: The MB-System program mblevitus depends on a 16 MByte data file
     that is not included in the MB-System tarfile. Be sure to
     uncompress the file and to set the "LEVITUS" flag in the install_makefiles appropriately,
     as described below in the installation section.

MB-System produces Postscript based graphics. Most current Unix operating systems provide a
program which serves as a screen-based Postscript viewer. If you do not have a Postscript viewer,
one option is to obtain the Ghostscript package from the Free Software Foundation.

- ghostview: open source screen Postscript viewer. The source code can be obtained from the
     GNU Project software archive of the Free Software Foundation.
- gv: better open source screen Postscript viewer. The source code can be obtained from the
     GNU Project software archive of the Free Software Foundation.

HOW TO INSTALL MB-SYSTEM:
------------------------

The MB-System source code is extracted by first uncompressing the tar file and then running tar:
     % tar xvzf MB-System.tar.gz

This will create a directory structure called mbsystem. In order to configure your installation,
you must edit the shellscript mbsystem/install_makefiles. This is perl script will read template
makefiles in the MB-System source directories and create makefiles with the correct attributes.
This enables users to install MB-System without having to edit the makefiles. Instead of editing
the makefiles directly, the installer should edit this script so that the locations of important
libraries and include files are accurate and so that the compile and link flags are correct.

The important parameters to be set in install_makefiles are:

     Required parameters:
     $MBSYSTEM_HOME - absolute path to the MB-System installation location
     $OS - Operating system (e.g. DARWIN, LINUX).
     $CFLAGS - Compile flags for C source files.
     $LFLAGS - Load flags for all object files.
     $NETCDFLIBDIR - Location of NetCDF library.
     $NETCDFINCDIR - Location of NetCDF header files.
     $GMTLIBDIR - Location of GMT libraries.
     $GMTINCDIR - Location of GMT header files.

     Required parameters for spectrogram program mbsegypsd
	- mbsegypsd will not be built if these are commented out
     $FFTWLIBDIR - Location of the FFTW3 library.
     $FFTWINCDIR - Location of FFTW3 header files.

     Required parameters for graphical tools
	- graphical tools will not be built if these
	  are commented out
     $MOTIFINCDIR - Location of the Motif header files.
     $MOTIFLIBS - Location of the Motif libraries.

     Required parameter for visualization tools
	- visualization tools will not be built if this
	  is commented out
     $OPENGLLIBS - Link flags for the OpenGL libraries: "-lGLU -lGL";

     Required parameter for mblevitus program
     $LEVITUS - Location of the Levitus library (usually "$MBSYSTEM_HOME/share/LevitusAnnual82.dat").

     Required parameter for mbotps program
     $OTPSDIR - Location of the OTPSnc installation (usually "/usr/local/OTPSnc").

     Optional name of C compiler (if other than "cc").
     $CC - Usually "cc", but could be "gcc".

     Optional parameters for use of independent GSF library installation
	- GSF library included with MB-System will be used
	  if these are commented out
     $GSFLIB - Location of GSF library.
     $GSFINCDIR - Location of GSF header files.

     Optional parameters for use of independent PROJ4 library installation
	- PROJ4 library included with MB-System will be used
	  if these are commented out
     $PROJLIB - Location of PROJ4 library.
     $PROJINCDIR - Location of PROJ4 header files.

Examples of appropriate values for several different installations (e.g. Sun, SGI, PC) are included
in the comments in install_makefiles. To execute install_makefiles, do the following:

     % cd mbsystem
     % install_makefiles

Because install_makefiles is a perl script, the executable perl must be available in the installer's
path. Once install_makefiles has been correctly configured and run, give the command "make all"
to generate the executable programs:

     % make all

The make command will descend recursively down through the directory structure, compiling
source files, linking object files, and copying executables and manual pages to the appropriate
directories. The executables will be placed in mbsystem/bin, the libraries in mbsystem/lib, and
the manual pages in mbsystem/man/man1.

Naturally, in order for users to use the MB-System utilities, the directory containing the
executables must be included in their path (usually this is done by editing the .cshrc file in the
user's home directory). The executable perl must also be available in the user's path for most of
the macros to work.

Most users will also wish to specify which program they generally use to view Postscript plots on
their screen. This parameter can be set either with the mbdefaults program or using the
MB_PS_VIEWER environment variable - the former is recommended (see the mbdefaults manual
page for details). On Sun workstations pageview is a popular Postscript viewer; on Silicon
Graphics machines xpsview is commonly used. A popular generic alternative to these platform
specific programs is ghostview.


WEB BASED DOCUMENTATION:
------------------------
The html documentation consists of a number of html
documents and images in the directory mbsystem/html.
This documentation also comprises the MB-System
web page available from the Lamont web site at:
	http://www.ldeo.columbia.edu
and the MBARI web site at:
	http://www.mbari.org
Users can access the documentation in their own MB-System
installation by using a web browser and accessing the file:
	file:/usr/local/mbsystem/html/mbsystem_home.html
(here it is assumed that MB-System has been installed
in /usr/local). Currently, the documentation includes some
general information about MB-System (e.g. who wrote, how to
get it, how to install it) and a complete set of manual
pages. In the future we will add increasing amounts of
information including examples of using MB-System.

CONTINUED SUPPORT:
-----------------
We are pleased to have received an additional five years
(2001-2005) of NSF funding for the support and development
of MB-System.  This project is also supported by the
Monterey Bay Aquarium Research Institute.

CONTRIBUTIONS:
--------------
We are actively soliciting contributions for inclusion in the
MB-System. In particular support for additional data formats in the
mbio.a library would be helpful, as would new, clever
tools for data manipulation and processing.  We thank
those who have already contributed to MB-System.

SUGGESTIONS:
------------
We are interested in your suggestions.

BUGS:
-----
There are undoubtably bugs in this software. Although we
make no promises about how rapidly problems will be fixed, we
strongly encourage users to notify us of bugs (and fixes!!).
We will continue to support this software for the forseeable
future.

ACKNOWLEDGMENTS:
----------------
The MB-System Cookbook was written by Val Schmidt, formerly
of L-DEO and now with CCOM/JHC at the University of New
Hampshire.

A number of people have made contributions to the code
included in MB-System.  These include:
    Bob Covill (Tekmap Consulting)
    Gordon Keith (CSIRO)
    Val Schmidt (CCOM/JHC, University of New Hampshire)
    Suzanne O'Hara (Lamont-Doherty Earth Observatory)
    Mike McCann (MBARI)
    Daniel Scheirer (Brown University)
    Paul Cohen (SeaBeam Instruments, now Fidelity Investments)
    Steve Dzurenko (SeaBeam Instruments, now University of Texas)
    Peter Lemmond (Woods Hole Oceanographic Institution)
    David Brock (formerly with Antarctic Support Associates)
    Alberto Malinverno (Lamont-Doherty Earth Observatory, later at
    Schlumberger-Doll)
    Russ Alexander (formerly with UCSB)

Numerous users and vendors have provided information regarding
data file formats and sonar system specific characteristics.

Good mapping!!

Dave Caress caress@mbari.org
Dale Chayes dale@ldeo.columbia.edu

